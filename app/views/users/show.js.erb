(function() {
  'use strict'
  <% template = @current_type == 'network' ? "network" : "#{@current_type}/list" %>
  var htmlContent = "<%= escape_javascript render(partial: template, locals: { items: @items, more: @more }) %>";
  $('#content').html(htmlContent);

  var $messagesBadge = $('.messages-badge');
  gon.unreadCount = '<%= current_user.unread_inbox_count %>';

  if (gon.unreadCount === 0) {
    $messagesBadge.toggleClass('-hidden', true);
  } else {
    $messagesBadge.toggleClass('-hidden', false);

    gon.unreadCount <= 9 ?
      $messagesBadge.text(gon.unreadCount) :
      $messagesBadge.text('9+');
  }


  App.trigger('Remote:load', { data: '<%= @current_type %>' });

})();
