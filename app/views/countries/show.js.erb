(function() {
  <%
    case @current_type
      when 'people'
        template = "investigators/list"
      when 'data'
        template = "data/countries"
      else
        template = "#{@current_type}/list"
    end
  %>

  var $content = $('#content');
  var htmlContent = "<%= escape_javascript render(partial: template, locals: { items: @items, more: @more }) %>";

  // If I use pure javascript, the trigger will never happen
  $('#content').html(htmlContent);

  App.trigger('Remote:load');

})();
